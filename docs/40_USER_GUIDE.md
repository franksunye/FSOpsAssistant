# FSOA 用户指南

Field Service Operations Assistant - 运营人员使用手册

## 1. 系统概述

FSOA是一个智能的现场服务运营助手，能够：
- **自动监控**：实时监控现场服务任务的时效状态
- **智能提醒**：超时时自动发送企微群通知
- **数据分析**：提供运营数据分析和趋势洞察
- **减少人工**：大幅减少重复性的监控和提醒工作

## 2. 快速开始

### 2.1 访问系统
1. 打开浏览器，访问：`http://your-server:8501`
2. 系统无需登录，直接进入主界面

### 2.2 主界面介绍
```
┌─────────────────────────────────────────┐
│              FSOA 运营助手               │
├─────────────────────────────────────────┤
│ 📊 仪表板  📋 任务列表  🔔 通知历史  ⚙️ 设置 │
├─────────────────────────────────────────┤
│                                         │
│  Agent状态: ✅ 运行中                    │
│  上次执行: 2025-06-25 10:00             │
│  下次执行: 2025-06-25 11:00             │
│                                         │
│  今日统计:                              │
│  • 处理任务: 25                         │
│  • 发送通知: 8                          │
│  • 超时任务: 3                          │
│                                         │
└─────────────────────────────────────────┘
```

## 3. 功能详解

### 3.1 仪表板
**功能说明：** 展示系统运行状态和关键指标

**主要信息：**
- Agent运行状态（运行中/已停止/错误）
- 执行时间信息（上次/下次执行时间）
- 实时统计数据（任务数量、通知数量等）
- 趋势图表（7天内的任务处理趋势）

**操作说明：**
- 点击"手动执行"按钮可立即触发Agent检查
- 点击"查看详情"可查看具体的执行日志

### 3.2 任务列表
**功能说明：** 查看和管理现场服务任务

**列表字段：**
- 任务ID：唯一标识符
- 任务标题：任务描述
- 状态：进行中/已完成/已超时
- SLA时间：服务等级协议规定的完成时间
- 已用时间：任务开始到现在的时间
- 超时时间：超出SLA的时间（如有）
- 负责群组：对应的企微群
- 最后通知：最近一次发送通知的时间

**筛选功能：**
```
┌─────────────────────────────────────────┐
│ 状态: [全部 ▼] 群组: [全部 ▼] 时间: [今天 ▼] │
│ 搜索: [输入任务ID或标题]           [搜索]  │
└─────────────────────────────────────────┘
```

**操作功能：**
- 点击任务行可查看详细信息
- 点击"发送提醒"可手动发送通知
- 点击"标记完成"可更新任务状态

### 3.3 通知历史
**功能说明：** 查看所有发送的通知记录

**记录信息：**
- 发送时间：通知发送的具体时间
- 任务信息：相关的任务ID和标题
- 通知内容：发送的具体消息
- 目标群组：接收通知的企微群
- 发送状态：成功/失败/重试中

**操作功能：**
- 点击"重新发送"可重新发送通知
- 点击"撤回"可尝试撤回消息（仅限最近发送的）

### 3.4 系统设置
**功能说明：** 配置系统参数和业务规则

#### 3.4.1 Agent设置
```
执行频率: [60] 分钟
使用LLM优化: [✓] 启用
LLM温度参数: [0.1]
最大重试次数: [3]
```

#### 3.4.2 通知设置
```
每小时最大通知数: [10]
通知冷却时间: [30] 分钟
升级阈值: [4] 小时
启用智能去重: [✓] 启用
```

#### 3.4.3 群组管理
```
┌─────────────────────────────────────────┐
│ 群组名称    │ Webhook地址      │ 状态   │ 操作 │
├─────────────────────────────────────────┤
│ 运维组A     │ https://qy...    │ 启用   │ 编辑 │
│ 运维组B     │ https://qy...    │ 启用   │ 编辑 │
│ 运维组C     │ https://qy...    │ 禁用   │ 编辑 │
└─────────────────────────────────────────┘
[+ 添加新群组]
```

## 4. 典型使用场景

### 4.1 日常监控
**场景：** 运营人员每天查看任务状态

**操作步骤：**
1. 打开FSOA系统
2. 查看仪表板了解整体状况
3. 点击"任务列表"查看具体任务
4. 关注超时任务，确认是否需要人工干预

### 4.2 处理超时任务
**场景：** 发现有任务超时需要处理

**操作步骤：**
1. 在任务列表中筛选"已超时"状态
2. 点击具体任务查看详情
3. 如需立即提醒，点击"发送提醒"
4. 联系现场人员确认情况
5. 根据反馈更新任务状态

### 4.3 配置新的企微群
**场景：** 新增一个运维团队需要接收通知

**操作步骤：**
1. 进入"系统设置" → "群组管理"
2. 点击"添加新群组"
3. 填写群组信息：
   - 群组名称：如"运维组D"
   - Webhook地址：从企微群机器人获取
   - 启用状态：选择"启用"
4. 点击"保存"完成配置
5. 在"测试"按钮验证配置是否正确

### 4.4 调整通知策略
**场景：** 发现通知过于频繁，需要调整

**操作步骤：**
1. 进入"系统设置" → "通知设置"
2. 调整相关参数：
   - 增加"通知冷却时间"（如从30分钟改为60分钟）
   - 降低"每小时最大通知数"（如从10改为5）
3. 点击"保存设置"
4. 观察后续几天的通知频率是否合适

## 5. 故障排查

### 5.1 Agent未运行
**症状：** 仪表板显示Agent状态为"已停止"

**排查步骤：**
1. 检查系统日志是否有错误信息
2. 确认Metabase连接是否正常
3. 检查DeepSeek API是否可用
4. 尝试手动执行Agent
5. 如问题持续，联系技术支持

### 5.2 通知发送失败
**症状：** 通知历史显示发送状态为"失败"

**排查步骤：**
1. 检查企微群Webhook地址是否正确
2. 确认群机器人是否被禁用
3. 检查网络连接是否正常
4. 尝试重新发送通知
5. 如持续失败，检查企微群设置

### 5.3 数据不更新
**症状：** 任务列表数据长时间未更新

**排查步骤：**
1. 确认Metabase服务是否正常
2. 检查数据库连接是否正常
3. 查看Agent执行日志
4. 手动触发数据同步
5. 联系系统管理员检查数据源

## 6. 最佳实践

### 6.1 日常使用建议
- **定期检查**：每天至少查看一次仪表板
- **及时响应**：收到通知后及时跟进处理
- **状态更新**：任务完成后及时更新状态
- **参数调优**：根据实际情况调整通知参数

### 6.2 配置建议
- **通知频率**：避免过于频繁的通知造成骚扰
- **群组管理**：按团队职责合理分配通知群组
- **阈值设置**：根据业务SLA合理设置超时阈值
- **备份配置**：定期备份重要的配置信息

### 6.3 性能优化
- **数据清理**：定期清理历史数据避免系统变慢
- **监控指标**：关注系统性能指标
- **资源使用**：避免在高峰期进行大量操作
- **版本更新**：及时更新到最新版本

## 7. 常见问题

### Q1: 为什么有些任务没有收到通知？
**A:** 可能的原因：
- 任务尚未超时
- 通知冷却时间未到
- 群组被禁用
- 网络连接问题

### Q2: 如何修改通知消息的内容？
**A:** 在系统设置中可以自定义消息模板，支持变量替换。

### Q3: Agent多久执行一次检查？
**A:** 默认每小时执行一次，可在系统设置中调整频率。

### Q4: 系统支持多少个企微群？
**A:** 理论上无限制，但建议不超过20个以确保性能。

### Q5: 如何查看详细的执行日志？
**A:** 在仪表板点击"查看详情"或联系系统管理员获取日志文件。

## 8. 联系支持

如遇到问题或需要帮助，请联系：
- **技术支持**：发送邮件至 support@company.com
- **产品反馈**：通过系统内的反馈功能提交
- **紧急问题**：拨打24小时支持热线 400-xxx-xxxx

---
> 用户指南持续更新，欢迎提供使用反馈和改进建议